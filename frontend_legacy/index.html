<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Shop - Sáº£n pháº©m</title>
  <link rel="stylesheet" href="./styles.css"/>
</head>
<body>
<header>
  <div class="topbar">
  <div class="nav">
    <a class="brand" href="./index.html">
      <div class="logo"></div>
      <div>
        <b>Neon Shop</b>
        <div class="small">Web bÃ¡n hÃ ng MVP</div>
      </div>
    </a>
    <div class="navlinks">
      <a class="pill" href="./index.html">ğŸª Sáº£n pháº©m</a>
      <a class="pill" href="./cart.html">ğŸ›’ Giá» hÃ ng</a>
      <a class="pill primary" href="./login.html">ğŸ” TÃ i khoáº£n</a>
    </div>
  </div>
</div>
<div class="container">
  <div class="hero">
    <div class="hero-inner">
      <div>
        <h1>ğŸ”¥ Neon Shop â€” mua sáº¯m kiá»ƒu hiá»‡n Ä‘áº¡i</h1>
        <p>TÃ¬m nhanh sáº£n pháº©m, thÃªm giá», checkout COD. UI gradient + card xá»‹n + cáº£m giÃ¡c â€œappâ€ hiá»‡n Ä‘áº¡i.</p>
      </div>
      <div class="badges">
        <span class="badge">âš¡ Fast</span>
        <span class="badge">ğŸ›¡ï¸ Secure</span>
        <span class="badge">âœ¨ Modern UI</span>
      </div>
    </div>
  </div>

  <div style="height:14px"></div>

  <div class="row">
    <input id="q" class="input" placeholder="TÃ¬m sáº£n pháº©m..." style="flex:1;min-width:240px"/>
    <button class="btn" id="btnSearch">ğŸ” TÃ¬m</button>
  </div>

  <div id="grid" class="grid"></div>
</div>

</header>

<div class="container">
  <div class="row">
    <input id="q" class="input" placeholder="TÃ¬m sáº£n pháº©m..." />
    <button class="btn" id="btnSearch">TÃ¬m</button>
  </div>
  <hr/>
  <div id="grid" class="grid"></div>
</div>

<script type="module">
  import { api, money } from "./app.js";
  const grid = document.querySelector("#grid");
  const q = document.querySelector("#q");

  async function loadProducts() {
    const qs = q.value.trim() ? `?q=${encodeURIComponent(q.value.trim())}` : "";
    const items = await api("/products" + qs);
    grid.innerHTML = items.map(p => `
  <div class="card">
    <div class="row" style="justify-content:space-between;align-items:flex-start">
      <span class="tag">#${p.slug}</span>
      <span class="small">
        Tá»“n: <b style="color:var(--text)">${p.stock_qty}</b>
      </span>
    </div>

    <h3 style="margin:10px 0 6px">${p.name}</h3>

    <div class="price">${money(p.price)}</div>

    <div class="small" style="margin-top:6px;min-height:34px">
      ${(p.description || "").slice(0, 70)}
      ${(p.description || "").length > 70 ? "..." : ""}
    </div>

    <div style="margin-top:12px;display:flex;gap:10px">
      <a class="btn outline"
         style="flex:1;text-align:center;text-decoration:none"
         href="./product.html?id=${p.id}">
         ğŸ‘€ Xem
      </a>

      <a class="btn"
         style="flex:1;text-align:center;text-decoration:none"
         href="./cart.html">
         ğŸ›’ Mua
      </a>
    </div>
  </div>
`).join("");

  }

  document.querySelector("#btnSearch").onclick = loadProducts;
  loadProducts();
</script>
</body>
</html>
